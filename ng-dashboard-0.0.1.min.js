(function(i){var r=i.module("ngDashboard",[]);r.factory("invokeIfDefined",function(){return function(r,e,n){if(i.isDefined(r[n])){e[n](r[n])}}})})(angular);(function(i,r){var e=i.module("ngDashboard");e.directive("widgetGroup",[function(){return{restrict:"E",scope:{groupData:"=groupData"},controller:["$scope","$http",function(e,n){if(i.isArray(e.groupData.data)){e.crossFilter=r(e.groupData.data)}else if(i.isString(e.groupData.dataUrl)){n({method:"GET",url:e.groupData.dataUrl}).success(function(i){e.crossFilter=r(i)}).error(function(i){throw i})}else{throw"No data array or data url specified for group "+e.groupData.name}}],link:function(i,r){r.addClass("widget-group")},templateUrl:"./template/widgetGroup.html"}}])})(angular,crossfilter);(function(i){var r=i.module("ngDashboard");function e(i){this.widgetProviders=i}e.prototype.createWidget=function(i,r,e){if(!this.widgetProviders[r]){throw"No widget with "+r+" registered"}return this.widgetProviders[r].createWidget(i,e)};r.provider("widgetFactory",[function(){var r={};var n={};this.registerWidgetProvider=function(i,e){r[i]=e};this.registerChartMixin=function(i,r){n[i]=r};this.$get=["$injector",function(t){i.forEach(n,function(i){if(i.initialize){t.invoke(i.initialize,i)}});i.forEach(r,function(i){if(i.initialize){t.invoke(i.initialize,i,n)}});return new e(r)}]}]);r.directive("widget",["widgetFactory","crossfilterUtils",function(i,r){return{restrict:"E",scope:{widgetData:"=widgetData",crossFilter:"=crossFilter"},link:function(e,n){var t,o,a;n.addClass("widget");var s=e.$watch("crossFilter",function(c){if(c){o=e.crossFilter.dimension(r.dimensionFunction(e.widgetData.dimension));var u=r.groupFunctions(e.widgetData.group);a=o.group().reduce(u.add,u.remove,u.init);t=i.createWidget(n.find("widget-body"),e.widgetData.type,{dimension:o,group:a,rawData:e.widgetData});s()}})},templateUrl:"./template/widget.html"}}])})(angular);(function(i){var r=i.module("ngDashboard");var e=/^([^\(]*)\(([^\)]*)\).*$/;r.factory("widgetExpressionParser",["$parse",function(i){return{parse:function(r){var n=e.exec(r);var t=n[1];var o=i(n[2]);return{functionName:t,parameters:o}},valueFunction:function(i){function r(r){var e=i({d:r});return e}return r}}}])})(angular);(function(i){var r=i.module("ngDashboard");r.provider("scaleParser",[function(){var r={};this.registerScaleProvider=function(i,e){r[i]=e};this.$get=["widgetExpressionParser","$injector",function(n,t){i.forEach(r,function(i){if(i.initialize){t.invoke(i.initialize,i)}});return new e(r,n)}]}]);function e(i,r){this.scaleProviders=i;this.widgetExpressionParser=r}e.prototype.parse=function(i){var r=this.widgetExpressionParser.parse(i);if(!this.scaleProviders[r.functionName]){throw"No scaleprovider "+r.functionName+" registered"}return this.scaleProviders[r.functionName].createScale(r.parameters)}})(angular);(function(i){var r=i.module("ngDashboard");r.provider("crossfilterUtils",[function(){var i={};this.addGroupFunctionProvider=function(r,e){i[r]=e};this.$get=["$parse","widgetExpressionParser",function(r,e){return{dimensionFunction:function(i){if(!i){throw"Expression is required to create crossfilter dimension"}return e.valueFunction(r(i))},groupFunctions:function(r){if(!r){throw"Expression is required to create crossfilter group"}var n=e.parse(r);if(!i[n.functionName]){throw"No groupfunction provider for "+n.functionName+" registered"}return i[n.functionName](n.parameters)}}}]}])})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("barchart",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","coordinateGridMixin","marginMixin","invokeIfDefined",function(i,r,e,n){this.baseChartMixin=i;this.coordinateGridMixin=r;this.invokeIfDefined=n;this.marginMixin=e}];e.prototype.createWidget=function(i,r){var e=dc.barChart(i[0]);this.baseChartMixin.configureChart(e,r);this.coordinateGridMixin.configureChart(e,r);this.marginMixin.configureChart(e,r);e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("boxPlot",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","coordinateGridMixin","marginMixin",function(i,r,e){this.baseChartMixin=i;this.coordinateGridMixin=r;this.marginMixin=e}];e.prototype.createWidget=function(i,r){var e=dc.boxPlot(i[0]);this.baseChartMixin.configureChart(e,r);this.coordinateGridMixin.configureChart(e,r);this.marginMixin.configureChart(e,r);e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("heatmap",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","coordinateGridMixin","marginMixin","colorMixin","invokeIfDefined",function(i,r,e,n,t){this.baseChartMixin=i;this.coordinateGridMixin=r;this.invokeIfDefined=t;this.marginMixin=e;this.colorMixin=n}];e.prototype.createWidget=function(i,r){var e=dc.heatMap(i[0]);this.baseChartMixin.configureChart(e,r);this.coordinateGridMixin.configureChart(e,r);this.marginMixin.configureChart(e,r);this.colorMixin.configureChart(e,r);e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("linechart",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","coordinateGridMixin","marginMixin","invokeIfDefined",function(i,r,e,n){this.baseChartMixin=i;this.coordinateGridMixin=r;this.invokeIfDefined=n;this.marginMixin=e}];e.prototype.createWidget=function(i,r){var e=dc.lineChart(i[0]);this.baseChartMixin.configureChart(e,r);this.coordinateGridMixin.configureChart(e,r);this.marginMixin.configureChart(e,r);this.invokeIfDefined(r.rawData,e,"renderArea");this.invokeIfDefined(r.rawData,e,"renderArea");this.invokeIfDefined(r.rawData,e,"brushOn");this.invokeIfDefined(r.rawData,e,"renderDataPoints");this.invokeIfDefined(r.rawData,e,"interpolate");e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("piechart",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","invokeIfDefined",function(i,r){this.baseChartMixin=i;this.invokeIfDefined=r}];e.prototype.createWidget=function(i,r){var e=dc.pieChart(i[0]);var n=this.invokeIfDefined;var t=r.rawData;this.baseChartMixin.configureChart(e,r);n(t,e,"slicesCap");n(t,e,"innerRadius");n(t,e,"radius");n(t,e,"cx");n(t,e,"cy");n(t,e,"minAngleForLabel");e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["scaleParserProvider",function(i){i.registerScaleProvider("linear",new e)}]);function e(){}e.prototype.createScale=function(i){var r=d3.scale.linear();var e=i({});n(r,e,"domain");n(r,e,"range");n(r,e,"rangeRound");n(r,e,"clamp");n(r,e,"ticks");return r};function n(i,r,e){if(r[e]){i[e](r[e])}}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerChartMixin("baseChartMixin",new e)}]);function e(){}e.prototype.initialize=["invokeIfDefined","$parse","widgetExpressionParser",function(i,r,e){this.invokeIfDefined=i;this.$parse=r;this.widgetExpressionParser=e}];e.prototype.configureChart=function(i,r){var e=r.rawData;var n=this.invokeIfDefined;i.dimension(r.dimension).group(r.group);n(e,i,"width");n(e,i,"minWidth");n(e,i,"height");n(e,i,"minHeight");n(e,i,"transitionDuration");if(e.keyAccessor){i.keyAccessor(this.widgetExpressionParser.valueFunction(this.$parse(e.keyAccessor)))}if(e.valueAccessor){i.valueAccessor(this.widgetExpressionParser.valueFunction(this.$parse(e.valueAccessor)))}if(e.titleAccessor){i.title(this.widgetExpressionParser.valueFunction(this.$parse(e.titleAccessor)))}this.setupLegend(i,e.legend)};e.prototype.setupLegend=function(i,r){if(!r){return}var e=this.invokeIfDefined;var n=dc.legend();e(r,n,"x");e(r,n,"y");e(r,n,"gap");e(r,n,"itemHeight");e(r,n,"horizontal");e(r,n,"legendWidth");e(r,n,"itemWidth");i.legend(n)}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerChartMixin("colorMixin",new e)}]);function e(){}e.prototype.initialize=["invokeIfDefined","$parse",function(i,r){this.invokeIfDefined=i;this.$parse=r}];e.prototype.configureChart=function(i,r){var e=r.rawData;var t=this.invokeIfDefined;t(e,i,"colorDomain");t(e,i,"linearColors");t(e,i,"ordinalColors");if(e.colorAccessor){i.colorAccessor(n(this.$parse(e.colorAccessor)))}if(e.calculateColorDomain){i.calculateColorDomain()}};function n(i){function r(r,e){return i({d:r,i:e})}return r}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerChartMixin("coordinateGridMixin",new e)}]);function e(){}e.prototype.initialize=["scaleParser","invokeIfDefined",function(i,r){this.scaleParser=i;this.invokeIfDefined=r}];e.prototype.configureChart=function(i,r){var e=this.invokeIfDefined;var n=r.rawData;if(n.x){i.x(this.scaleParser.parse(n.x))}e(n,i,"yAxisPadding");e(n,i,"yAxisLabel");e(n,i,"brushOn");e(n,i,"elasticX");e(n,i,"elasticY");e(n,i,"mouseZoomable")}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerChartMixin("marginMixin",new e)}]);function e(){}e.prototype.initialize=["invokeIfDefined",function(i){this.invokeIfDefined=i}];e.prototype.configureChart=function(i,r){this.invokeIfDefined(r.rawData,i,"margins")}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["crossfilterUtilsProvider",function(i){i.addGroupFunctionProvider("array",function(i){if(!i){throw"sum needs a groupParam"}return e(i)})}]);function e(i){var r={init:function(){return[]},add:function(r,e){var n=i({d:e}).value;r.push(n);return r},remove:function(r,e){var n=i({d:e}).value;r.slice(r.indexOf(n),1);return r}};return r}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["crossfilterUtilsProvider",function(i){i.addGroupFunctionProvider("sum",function(i){if(!i){throw"sum needs a groupParam"}return e(i)})}]);function e(i){var r={init:function(){return 0},add:function(r,e){var n=i({d:e}).value;return r+n},remove:function(r,e){var n=i({d:e}).value;return r-n}};return r}})(angular);