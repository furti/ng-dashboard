(function(i){var r=i.module("ngDashboard",[]);r.factory("invokeIfDefined",function(){return function(r,e,t){if(i.isDefined(r[t])){e[t](r[t])}}})})(angular);(function(i,r){var e=i.module("ngDashboard");e.directive("widgetGroup",[function(){return{restrict:"E",scope:{groupData:"=groupData"},controller:["$scope","$http",function(e,t){if(i.isArray(e.groupData.data)){e.crossFilter=r(e.groupData.data)}else if(i.isString(e.groupData.dataUrl)){t({method:"GET",url:e.groupData.dataUrl}).success(function(i){e.crossFilter=r(i)}).error(function(i){throw i})}else{throw"No data array or data url specified for group "+e.groupData.name}}],link:function(i,r){r.addClass("widget-group")},templateUrl:"./template/widgetGroup.html"}}])})(angular,crossfilter);(function(i){var r=i.module("ngDashboard");function e(i){this.widgetProviders=i}e.prototype.createWidget=function(i,r,e){if(!this.widgetProviders[r]){throw"No widget with "+r+" registered"}return this.widgetProviders[r].createWidget(i,e)};r.provider("widgetFactory",[function(){var r={};var t={};this.registerWidgetProvider=function(i,e){r[i]=e};this.registerChartMixin=function(i,r){t[i]=r};this.$get=["$injector",function(n){i.forEach(t,function(i){if(i.initialize){n.invoke(i.initialize,i)}});i.forEach(r,function(i){if(i.initialize){n.invoke(i.initialize,i,t)}});return new e(r)}]}]);r.directive("widget",["widgetFactory",function(i){return{restrict:"E",scope:{widgetData:"=widgetData",crossFilter:"=crossFilter"},link:function(r,e){var n,o;e.addClass("widget");var a=r.$watch("crossFilter",function(s){if(s){var c=e.find("widget-body");n=t(c,r.widgetData,r.crossFilter,i);if(r.widgetData.overlays){o=[];for(var u in r.widgetData.overlays){var f=t(c,r.widgetData.overlays[u],r.crossFilter,i);o.push(f)}}a()}})},templateUrl:"./template/widget.html"}}]);function t(i,r,e,t){return t.createWidget(i,r.type,{crossfilter:e,rawData:r})}})(angular);(function(i){var r=i.module("ngDashboard");var e=/^([^\(]*)\(([^\)]*)\).*$/;r.factory("widgetExpressionParser",["$parse",function(i){return{parse:function(r){var t=e.exec(r);var n=t[1];var o=i(t[2]);return{functionName:n,parameters:o}},valueFunction:function(i){function r(r){var e=i({d:r});return e}return r}}}])})(angular);(function(i){var r=i.module("ngDashboard");r.provider("scaleParser",[function(){var r={};this.registerScaleProvider=function(i,e){r[i]=e};this.$get=["widgetExpressionParser","$injector",function(t,n){i.forEach(r,function(i){if(i.initialize){n.invoke(i.initialize,i)}});return new e(r,t)}]}]);function e(i,r){this.scaleProviders=i;this.widgetExpressionParser=r}e.prototype.parse=function(i){if(!this.scaleProviders[i.type]){throw"No scaleprovider "+i.type+" registered"}return this.scaleProviders[i.type].createScale(i.parameters)}})(angular);(function(i){var r=i.module("ngDashboard");r.provider("crossfilterUtils",[function(){var r={};this.addGroupFunctionProvider=function(i,e){r[i]=e};this.$get=["$parse","widgetExpressionParser","$injector",function(e,t,n){i.forEach(r,function(i){if(i.initialize){n.invoke(i.initialize,i)}});return{dimensionFunction:function(i){if(!i){throw"Expression is required to create crossfilter dimension"}return t.valueFunction(e(i))},groupFunctions:function(i){if(!i){throw"Expression is required to create crossfilter group"}if(!r[i.functionName]){throw"No groupfunction provider for "+i.functionName+" registered"}return r[i.functionName].buildGroup(i.parameters,i.debug)}}}]}])})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("barchart",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","coordinateGridMixin","marginMixin","stackMixin","invokeIfDefined","colorMixin",function(i,r,e,t,n,o){this.baseChartMixin=i;this.coordinateGridMixin=r;this.invokeIfDefined=n;this.marginMixin=e;this.stackMixin=t;this.colorMixin=o}];e.prototype.createWidget=function(i,r){var e=dc.barChart(i[0]);this.baseChartMixin.configureChart(e,r);this.stackMixin.configureChart(e,r);this.coordinateGridMixin.configureChart(e,r);this.marginMixin.configureChart(e,r);this.colorMixin.configureChart(e,r);e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("boxPlot",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","coordinateGridMixin","marginMixin","colorMixin",function(i,r,e,t){this.baseChartMixin=i;this.coordinateGridMixin=r;this.marginMixin=e;this.colorMixin=t}];e.prototype.createWidget=function(i,r){var e=dc.boxPlot(i[0]);this.baseChartMixin.configureChart(e,r);this.coordinateGridMixin.configureChart(e,r);this.marginMixin.configureChart(e,r);this.colorMixin.configureChart(e,r);e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("heatmap",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","coordinateGridMixin","marginMixin","colorMixin","invokeIfDefined",function(i,r,e,t,n){this.baseChartMixin=i;this.coordinateGridMixin=r;this.invokeIfDefined=n;this.marginMixin=e;this.colorMixin=t}];e.prototype.createWidget=function(i,r){var e=dc.heatMap(i[0]);this.baseChartMixin.configureChart(e,r);this.coordinateGridMixin.configureChart(e,r);this.marginMixin.configureChart(e,r);this.colorMixin.configureChart(e,r);e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("linechart",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","coordinateGridMixin","marginMixin","stackMixin","invokeIfDefined","colorMixin",function(i,r,e,t,n,o){this.baseChartMixin=i;this.coordinateGridMixin=r;this.invokeIfDefined=n;this.marginMixin=e;this.stackMixin=t;this.colorMixin=o}];e.prototype.createWidget=function(i,r){var e=dc.lineChart(i[0]);this.baseChartMixin.configureChart(e,r);this.stackMixin.configureChart(e,r);this.coordinateGridMixin.configureChart(e,r);this.marginMixin.configureChart(e,r);this.colorMixin.configureChart(e,r);this.invokeIfDefined(r.rawData,e,"renderArea");this.invokeIfDefined(r.rawData,e,"renderDataPoints");this.invokeIfDefined(r.rawData,e,"interpolate");e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerWidgetProvider("piechart",new e)}]);function e(){}e.prototype.initialize=["baseChartMixin","invokeIfDefined","colorMixin",function(i,r,e){this.baseChartMixin=i;this.invokeIfDefined=r;this.colorMixin=e}];e.prototype.createWidget=function(i,r){var e=dc.pieChart(i[0]);var t=this.invokeIfDefined;var n=r.rawData;this.baseChartMixin.configureChart(e,r);this.colorMixin.configureChart(e,r);t(n,e,"slicesCap");t(n,e,"innerRadius");t(n,e,"radius");t(n,e,"cx");t(n,e,"cy");t(n,e,"minAngleForLabel");e.render();return e}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["scaleParserProvider",function(i){i.registerScaleProvider("linear",new e)}]);function e(){}e.prototype.createScale=function(i){var r=d3.scale.linear();t(r,i,"domain");t(r,i,"range");t(r,i,"rangeRound");t(r,i,"clamp");t(r,i,"ticks");return r};function t(i,r,e){if(r[e]){i[e](r[e])}}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerChartMixin("baseChartMixin",new e)}]);function e(){}e.prototype.initialize=["invokeIfDefined","$parse","widgetExpressionParser","crossfilterUtils",function(i,r,e,t){this.invokeIfDefined=i;this.$parse=r;this.widgetExpressionParser=e;this.crossfilterUtils=t}];e.prototype.configureChart=function(i,r){var e=r.rawData;var t=this.invokeIfDefined;var n=this.buildDimension(r);var o=this.buildGroup(n,r);i.dimension(n);if(e.group.name){i.group(o,e.group.name)}else{i.group(o)}t(e,i,"width");t(e,i,"minWidth");t(e,i,"height");t(e,i,"minHeight");t(e,i,"transitionDuration");if(e.keyAccessor){i.keyAccessor(this.widgetExpressionParser.valueFunction(this.$parse(e.keyAccessor)))}if(e.valueAccessor){i.valueAccessor(this.widgetExpressionParser.valueFunction(this.$parse(e.valueAccessor)))}if(e.titleAccessor){i.title(this.widgetExpressionParser.valueFunction(this.$parse(e.titleAccessor)))}this.setupLegend(i,e.legend)};e.prototype.setupLegend=function(i,r){if(!r){return}var e=this.invokeIfDefined;var t=dc.legend();e(r,t,"x");e(r,t,"y");e(r,t,"gap");e(r,t,"itemHeight");e(r,t,"horizontal");e(r,t,"legendWidth");e(r,t,"itemWidth");i.legend(t)};e.prototype.buildDimension=function(i){var r=i.crossfilter;var e=this.crossfilterUtils.dimensionFunction(i.rawData.dimension);return r.dimension(e)};e.prototype.buildGroup=function(i,r){var e=this.crossfilterUtils.groupFunctions(r.rawData.group);return i.group().reduce(e.add,e.remove,e.init)}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerChartMixin("colorMixin",new e)}]);function e(){}e.prototype.initialize=["invokeIfDefined","$parse",function(i,r){this.invokeIfDefined=i;this.$parse=r}];e.prototype.configureChart=function(i,r){var e=r.rawData;var n=this.invokeIfDefined;n(e,i,"colors");n(e,i,"colorDomain");n(e,i,"linearColors");n(e,i,"ordinalColors");if(e.colorAccessor){i.colorAccessor(t(this.$parse(e.colorAccessor)))}if(e.calculateColorDomain){i.calculateColorDomain()}};function t(i){function r(r,e){return i({d:r,i:e})}return r}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerChartMixin("coordinateGridMixin",new e)}]);function e(){}e.prototype.initialize=["scaleParser","invokeIfDefined",function(i,r){this.scaleParser=i;this.invokeIfDefined=r}];e.prototype.configureChart=function(i,r){var e=this.invokeIfDefined;var t=r.rawData;if(t.x){i.x(this.scaleParser.parse(t.x))}e(t,i,"yAxisPadding");e(t,i,"yAxisLabel");e(t,i,"brushOn");e(t,i,"elasticX");e(t,i,"elasticY");e(t,i,"mouseZoomable");e(t,i,"renderHorizontalGridLines");e(t,i,"renderVerticalGridLines");if(t.xAxis){this.configureAxis(i.xAxis(),t.xAxis)}if(t.yAxis){this.configureAxis(i.yAxis(),t.yAxis)}};e.prototype.configureAxis=function(i,r){var e=this.invokeIfDefined;e(r,i,"orient");e(r,i,"ticks");e(r,i,"tickValues");e(r,i,"tickSize");e(r,i,"innerTickSize");e(r,i,"outerTickSize");e(r,i,"tickPadding");if(r.tickFormat){i.tickFormat(d3.format(r.tickFormat))}}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["widgetFactoryProvider",function(i){i.registerChartMixin("marginMixin",new e)}]);function e(){}e.prototype.initialize=["invokeIfDefined",function(i){this.invokeIfDefined=i}];e.prototype.configureChart=function(i,r){this.invokeIfDefined(r.rawData,i,"margins")}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["crossfilterUtilsProvider",function(i){i.addGroupFunctionProvider("array",new e)}]);function e(){}e.prototype.initialize=["$parse",function(i){this.$parse=i}];e.prototype.buildGroup=function(i){if(!i){throw"sum needs a groupParam"}return t(this.$parse(i.value))};function t(i){var r={init:function(){return[]},add:function(r,e){var t=i({v:e});r.push(t);return r},remove:function(r,e){var t=i({v:e});r.splice(r.indexOf(t),1);return r}};return r}})(angular);(function(i){var r=i.module("ngDashboard");r.config(["crossfilterUtilsProvider",function(i){i.addGroupFunctionProvider("sum",new e)}]);function e(){}e.prototype.initialize=["$parse",function(i){this.$parse=i}];e.prototype.buildGroup=function(i){if(!i){throw"sum needs a groupParam"}return t(this.$parse(i.value))};function t(i){var r={init:function(){return 0},add:function(r,e){var t=i({v:e});return r+t},remove:function(r,e){var t=i({v:e});return r-t}};return r}})(angular);